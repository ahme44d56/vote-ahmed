استفتاء: هل سينجح أحمد بالسادس؟ :root{ --bg:#f6f7fb; --card:#ffffff; --text:#111827; --muted:#6b7280; --green:#16a34a; --red:#dc2626; } *{box-sizing:border-box} body{font-family:Segoe UI, Tahoma, "Noto Naskh Arabic", "Segoe UI Emoji", Arial, sans-serif;background:var(--bg);color:var(--text);padding:24px;} .container{max-width:900px;margin:24px auto;background:var(--card);padding:28px;border-radius:12px;box-shadow:0 6px 20px rgba(15,23,42,0.08)} h1{font-size:22px;margin:0 0 12px} p.lead{color:var(--muted);margin-top:0;margin-bottom:18px} .vote-row{display:flex;gap:16px;align-items:stretch} .vote-card{flex:1;padding:18px;border-radius:10px;display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;min-height:160px} .left{background:linear-gradient(180deg,rgba(16,185,129,0.06),transparent);border:1px solid rgba(16,185,129,0.08)} .right{background:linear-gradient(180deg,rgba(239,68,68,0.06),transparent);border:1px solid rgba(239,68,68,0.08)} .btn{display:inline-block;padding:12px;border-radius:8px;font-weight:600;cursor:pointer;border:none;font-size:16px} .btn-green{background:var(--green);color:white} .btn-red{background:var(--red);color:white} .meta{font-size:14px;color:var(--muted);margin-bottom:8px} .count{font-size:20px;font-weight:700} .bar{height:10px;background:#e6e7ee;border-radius:999px;overflow:hidden;margin-top:12px} .bar > i{display:block;height:100%;background:linear-gradient(90deg, rgba(16,185,129,0.9), rgba(34,197,94,0.9));width:0} .bar.r{ --color: var(--red); } .bar.r > i{background:linear-gradient(90deg, rgba(244,63,94,0.95), rgba(220,38,38,0.95));} .bottom-row{margin-top:18px;display:flex;justify-content:space-between;align-items:center} .small{font-size:13px;color:var(--muted)} .reset{background:transparent;border:1px dashed #cbd5e1;padding:8px;border-radius:8px;cursor:pointer} footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center} @media (max-width:640px){.vote-row{flex-direction:column}} 

استفتاء

هل سوف ينجح أحمد بالسادس أم لا؟

<div class="vote-row"> <div class="vote-card left"> <div> <div class="meta">على اليمين — خيار متفائل</div> <div class="count" id="yesCount">0</div> <div class="small">نعم، سينجح إن شاء الله</div> <div class="bar" aria-hidden> <i id="yesBar" style="width:0%"></i> </div> </div> <div style="text-align:left;margin-top:12px"> <button id="yesBtn" class="btn btn-green">نعم — سينجح إن شاء الله</button> </div> </div> <div class="vote-card right"> <div> <div class="meta">على اليسار — خيار متحفظ</div> <div class="count" id="noCount">0</div> <div class="small">لا، لا أعتقد</div> <div class="bar r" aria-hidden> <i id="noBar" style="width:0%"></i> </div> </div> <div style="text-align:left;margin-top:12px"> <button id="noBtn" class="btn btn-red">لا — لا أعتقد</button> </div> </div> </div> <div class="bottom-row"> <div class="small" id="statusText">لم تصوت بعد. يمكنك اختيار خيار واحد.</div> <div> <button class="reset" id="resetBtn" title="إعادة ضبط الأصوات (مطلوب كلمة مرور)">إعادة ضبط الأصوات</button> </div> </div> <footer>الأصوات مخزنة محليًا في متصفحك (localStorage). لا توجد قاعدة بيانات خارجية.</footer> 

// مفاتيح التخزين const KEY_YES = 'poll_yes_count_v1'; const KEY_NO = 'poll_no_count_v1'; const KEY_VOTED = 'poll_user_voted_v1'; // عناصر DOM const yesBtn = document.getElementById('yesBtn'); const noBtn = document.getElementById('noBtn'); const yesCountEl = document.getElementById('yesCount'); const noCountEl = document.getElementById('noCount'); const statusText = document.getElementById('statusText'); const yesBar = document.getElementById('yesBar'); const noBar = document.getElementById('noBar'); const resetBtn = document.getElementById('resetBtn'); // تحميل القيم أو تهيئتها function loadCounts(){ const yes = parseInt(localStorage.getItem(KEY_YES) || '0', 10); const no = parseInt(localStorage.getItem(KEY_NO) || '0', 10); return {yes,no}; } function saveCounts(y,n){ localStorage.setItem(KEY_YES, String(y)); localStorage.setItem(KEY_NO, String(n)); } function updateUI(){ const {yes,no} = loadCounts(); const total = yes + no; yesCountEl.textContent = yes; noCountEl.textContent = no; const yesPct = total === 0 ? 0 : Math.round((yes/total)*100); const noPct = total === 0 ? 0 : 100 - yesPct; yesBar.style.width = yesPct + '%'; noBar.style.width = noPct + '%'; const voted = localStorage.getItem(KEY_VOTED); if(voted){ statusText.textContent = 'شكرًا — لقد قمت بالتصويت (خيارك: ' + voted + ')'; yesBtn.disabled = true; noBtn.disabled = true; yesBtn.style.opacity = 0.9; noBtn.style.opacity = 0.9; } else { statusText.textContent = 'لم تصوت بعد. يمكنك اختيار خيار واحد.'; yesBtn.disabled = false; noBtn.disabled = false; yesBtn.style.opacity = 1; noBtn.style.opacity = 1; } } // إجراء التصويت function vote(choice){ const counts = loadCounts(); if(localStorage.getItem(KEY_VOTED)){ alert('لقد صوتت بالفعل. لا يمكنك التصويت مرتين من نفس المتصفح.'); return; } if(choice === 'نعم'){ counts.yes += 1; localStorage.setItem(KEY_VOTED, 'نعم'); } else { counts.no += 1; localStorage.setItem(KEY_VOTED, 'لا'); } saveCounts(counts.yes, counts.no); updateUI(); } yesBtn.addEventListener('click', function(){ vote('نعم'); }); noBtn.addEventListener('click', function(){ vote('لا'); }); // إعادة الضبط — يتطلب كلمة مرور بسيطة (للاستخدام المحلي فقط) resetBtn.addEventListener('click', function(){ const pw = prompt('ادخل كلمة المرور لإعادة ضبط الأصوات:'); // كلمة مرور افتراضية: admin123 (يمكنك تغييرها داخل الكود) if(pw === null) return; if(pw === 'admin123'){ localStorage.removeItem(KEY_YES); localStorage.removeItem(KEY_NO); localStorage.removeItem(KEY_VOTED); updateUI(); alert('تمت إعادة الضبط.'); } else { alert('كلمة المرور غير صحيحة.'); } }); // تهيئة واجهة المستخدم عند التحميل updateUI(); 